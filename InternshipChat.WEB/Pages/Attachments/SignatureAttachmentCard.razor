@using InternshipChat.DAL.Entities;
@inject IDialogService DialogService

<MudCard Outlined="true">
    <MudCardContent>
        <MudText>@SignatureAttachment.FileName</MudText>
    </MudCardContent>
    <MudCardActions>
        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="ShowAttachment">Open</MudButton>
    </MudCardActions>
</MudCard>

@code {
    [Parameter] public ChatAttachment SignatureAttachment { get; set; }
    private string? editedDocumentBase64;

    public async Task ShowAttachment()
    {
        var dialogParameter = new DialogParameters
            {
                ["PdfUrl"] = "https://chatstoragein1.blob.core.windows.net/attachments-container/sample_94789602-e.pdf?sp=r&st=2023-06-12T06:46:00Z&se=2023-06-12T14:46:00Z&spr=https&sv=2022-11-02&sr=b&sig=LSyy6UdKEm1SeepkoPg3RTJdry0jrP4UyXbzOFXhS5I%3D"
            };

        var dialogResult = await DialogService.Show<AttachmentPreviewModal>(SignatureAttachment.FileName, dialogParameter).Result;
        if (!dialogResult.Canceled)
        {
            editedDocumentBase64 = dialogResult.Data as string ?? null;
        }
    }
}
